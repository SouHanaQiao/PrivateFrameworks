// Copyright 2014 Apple Inc.  All Rights Reserved.
(function(){return function(e,t,r){if(!r.emailSubject.test(e.subject))return CONTINUE;var n=Scanner.fromMessage(e);n.setLocale(t);var a,p,s,i,o,d,g,f,x,c,m,S,u,l,P,C,h,A,y;return a=r.reservationStatus,y=r.provider,p=n.getSpan().innerCapture(r.reservationId,1),s=n.getSpan().innerCapture(r.underPersonName,1).trim(),g=n.getSpan().innerCapture(r.carBrand,1).trim(),r.changeReservationUrlPrefix&&(h=A=n.getSpan().nextRegExp(r.changeReservationUrlPrefix).nextLink()),o=n.getSpan().nextRegExp(r.pickUpDateTimePrefix).nextDate(),d=n.getSpan().nextRegExp(r.dropOffDateTimePrefix).nextDate(),P=r.pickUpAddressPrefix&&r.pickUpAddressSuffix?n.getSpan().innerCapture(regExpFormatted(/\1[\n\s]+(.+)\n+([\s\S]+)[\n\s]+\2/,r.pickUpAddressPrefix,r.pickUpAddressSuffix)):r.pickUpAddressPrefix?n.getSpan().nextText(r.pickUpAddressPrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1[\n\s]+(.+)\n+([\s\S]+)/,r.pickUpAddressPrefix)):o.parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1[\n\s]+(.+)\n+([\s\S]+)/,""+o)),P&&3===P.length&&([,m,S]=P),C=r.dropOffAddressPrefix&&r.dropOffAddressSuffix?n.getSpan().innerCapture(regExpFormatted(/\1[\n\s]+(.+)\n+([\s\S]+)[\n\s]+\2/,r.dropOffAddressPrefix,r.dropOffAddressSuffix)):r.dropOffAddressPrefix?n.getSpan().nextText(r.dropOffAddressPrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1[\n\s]+(.+)\n+([\s\S]+)/,r.dropOffAddressPrefix)):d.parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1[\n\s]+(.+)\n+([\s\S]+)/,""+d)),C&&3===C.length&&([,u,l]=C),r.totalPrice?c=n.getSpan().innerCapture(r.totalPrice):"2016"===r.style?c=n.getSpan().nextRegExp(r.totalPricePrefix).nextAnyTag("td").tagContents().innerCapture(/([^0-9\.\,\s]+)\s*([0-9\.\,]+)/):"2015"===r.style&&(c=n.getSpan().nextRegExp(r.totalPricePrefix).nextAnyTag("td").nextAnyTag("td").tagContents().innerCapture(/([^0-9\.\,\s]+)\s*([0-9\.\,]+)/)),c&&3===c.length&&([,x,f]=c),"Confirmed"===a&&ASSERT(p,S,o)||"Cancelled"===a&&ASSERT(p)?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:f,priceCurrency:x,reservationStatus:"http://schema.org/Reservation"+a,reservationId:p,modifyReservationUrl:h,cancelReservationUrl:A,underName:{"@type":"http://schema.org/Person",name:s,email:i},provider:{"@type":"http://schema.org/Organization",name:y},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:g}},pickupTime:o,pickupLocation:{"@type":"http://schema.org/Place",name:m,address:S},dropoffTime:d,dropoffLocation:{"@type":"http://schema.org/Place",name:u,address:l}}]:void 0}}).call();
