// Copyright 2014 Apple Inc.  All Rights Reserved.
new ReverseTemplateList([new ReverseTemplate("jal.com-confirmation-jp",function(e){return/JAL\u56fd\u5185\u7dda\d+\u6708\d+\u65e5JAL\d{3,4} .(?:\u8cfc\u5165|\u4e88\u7d04)\u5185\u5bb9\u306e\u304a\u77e5\u3089\u305b./.test(e.subject)},function(e){if(!/JAL\u56fd\u5185\u7dda\d+\u6708\d+\u65e5JAL\d{3,4} .(?:\u8cfc\u5165|\u4e88\u7d04)\u5185\u5bb9\u306e\u304a\u77e5\u3089\u305b./.test(e.subject))return CONTINUE;var r="ja_JP",t=Scanner.fromMessage(e);t.setLocale(r);var a,i,n,o=t.getSpan(),p=[],s=[],u=[],d=/\s(.+)\s?\u69d8\s?\d+\u6b73/,m=/\(\d+\)\s?(\d{1,2}\u6708\d{1,2}\u65e5)\s?([A-Z]{2,3})(\d{3,4})\u4fbf/,l=/(.+?)\s?(\d{1,2}:\d{2})\u767a\s?\u2192\s?(.+?)\s(\d{1,2}:\d{2})\u7740/,c=/\u5ea7\u5e2d\u756a\u53f7\s?(\d+)([A-Z])/,h=/\u4e88\u7d04\u756a\u53f7\s?(\d+)/,g=/\u5408\u8a08\s?([\d,]+)(\D)/;for(a=o.next(d);a!==t.getNullSpan();a=a.next(d))n=a.innerCapture(d),n&&2==n.length&&s.push({name:n[1].trim()}),a=a.next(/\d+\u6b73/);for(a=o.next(m);a!==t.getNullSpan();a=a.next(m)){var N,v,A,C,f,T,S,b,y,x,D,J;if(n=a.innerCapture(m),n&&4===n.length)switch([,A,N,v]=n,""+N){case"JAL":N="JL";break;case"JTA":N="NU"}i=a.next(l),n=i.innerCapture(l),n&&5===n.length&&([,C,f,T,S]=n),i=a.next(c),n=i.innerCapture(c),n&&3===n.length&&([,y,x]=n),i=a.next(h),n=i.innerCapture(h),n&&2===n.length&&([,b]=n),i=a.next(g),n=i.innerCapture(g),n&&3===n.length&&([,D,J]=n),p.push({departureDateTime:t.getDetachedSpan(A+" "+f),arrivalDateTime:t.getDetachedSpan(A+" "+S),airlineCode:N,flightNumber:v,departureAirportName:C.trim(),arrivalAirportName:T.trim(),seatNumber:y,seatRow:x,reservationId:b,totalPrice:D,priceCurrency:J})}return 0===s.length&&s.push({}),s.forEach(function(e){p.forEach(function(r){ASSERT(r.airlineCode,r.flightNumber,r.departureAirportName,r.departureDateTime,r.arrivalAirportName,r.arrivalDateTime)&&u.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:r.airlineName,airlineCode:r.airlineCode,flightNumber:r.flightNumber,departureAirportFuzzy:r.departureAirportName,departureAirportCode:r.departureAirportCode,departureTime:r.departureDateTime,arrivalAirportFuzzy:r.arrivalAirportName,arrivalAirportCode:r.arrivalAirportCode,arrivalTime:r.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.name},reservationId:r.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:r.totalPrice,priceCurrency:r.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:r.seatNumber&&r.seatRow?r.seatNumber+r.seatRow:""}}})})}),u.length>=1?u:CONTINUE},"0/1/2/3/4/5/6/5/7/7/7/7/4/8/9/241/454/458","SG996c9563")]);
